<!DOCTYPE html>
<html lang="ar">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <!-- ملفات التنسيق الخارجية -->
  <link rel="stylesheet" href="Style.css">
  <link rel="stylesheet" href="Style/aos.css" />
  <!-- link -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.4/lottie.min.js"></script>
  <link rel="stylesheet" href="Style/aos.css" />
</head>

<!-- <div id="preloader"></div> -->

<body>
  <!----------------------------------- header ----------------------------------->
  <header class="header" data-aos="fade-dowen">
    <div class="ul">
      <div class="buts">
        <!-- تعديل الزر ليحتوي على id -->
        <li><a href="#" id="langToggle" class="but">EN</a></li>
        <li><a class="workbut" href="portfolio.html">أعمالي</a></li>
      </div>
      <div class="logo">
        <li><a class="logotext" href="Index.html">سكِيبر</a></li>
      </div>
      <li><a class="conbut" href="index.html#Contact">التواصل</a></li>
    </div>
  </header>
  <!-- portfolios -->
  <div class="project">

  </div>
  <!----------------------------------- footer ----------------------------------->
  <footer class="footer"></footer>

  <!-- Script -->
  <script src="Js/Main.js"></script>
  <script src="Js/aos.js"></script>
  <script src="Js/jquery-3.7.1.min.js"></script>
  <script>
    AOS.init();
    const urlParams = new URLSearchParams(window.location.search);
    const projectId = urlParams.get('id');
    // تحميل بيانات المنتجات
    fetch('data/projects.json')
      .then(response => response.json())
      .then(data => {
        // التحقق من وجود المنتج
        if (data[projectId]) {
          const project = data[projectId];

          $(".project")
            .append(
              `<div class="top">
                <div class="detals">
                  <img src="` + project.الشعار + `" alt="` + project.الاسم + `" class="logo">
                  <div class="texts">
                    <h3>` + project.الاسم + `</h3>
                    <h4>` + project.الوصف + `</h4>
                  </div>
                </div>
                <a href="` + project.الرابط + `" class="mainbut">أَلْقَى نَظْرَةً</a>
              </div>
              <div class="buttom">
                <div class="imgs">
                  ` +
              project.الصور.map((صورة) => `
                  <img class="cover" src="` + صورة + `" alt="` + project.الاسم + `">
                  `).join('') + `
                </div>
                <div class="dis">
                  <p>` + project.الشرح + `</p>
                </div>
              </div>`
            );
        } else {
          alert("المنتج غير موجود");
        }
      })
      .catch(error => {
        alert("حدث خطأ في تحميل البيانات", error);
      });

    fetch('data/projects.json')
      .then(response => response.json())
      .then(data => {
        const urlParams = new URLSearchParams(window.location.search);
        const projectId = urlParams.get('id');
        if (data[projectId]) {
          const project = data[projectId];
          document.title = project.الاسم;
          function setOrCreateMeta(property, content) {
            let meta = document.querySelector(`meta[${property}]`);
            if (!meta) {
              meta = document.createElement('meta');
              meta.setAttribute(property.split('=')[0], property.split('=')[1].replace(/"/g, ''));
              document.head.appendChild(meta);
            }
            meta.setAttribute('content', content);
          }
          setOrCreateMeta('property="twitter:title"', project.الاسم);
          setOrCreateMeta('property="og:title"', project.الاسم);
          setOrCreateMeta('name="description"', project.الوصف);
          setOrCreateMeta('property="og:description"', project.الوصف);
          setOrCreateMeta('property="twitter:description"', project.الوصف);
          setOrCreateMeta('property="og:image"', project.الصور[0]);
          setOrCreateMeta('property="twitter:image"', project.الصور[0]);
        } else {
          alert("المنتج غير موجود");
        }
      })
      .catch(error => {
        console.error("حدث خطأ في تحميل البيانات: ", error);
      });
  </script>
</body>

</html>